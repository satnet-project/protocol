sudo: false

language: 'python'

branches:
  only:
    - jrpc_if

python:
  - '2.7'

git:
  submodules: false

# before_install:
#   - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
#   - git submodule update --init --recursive
#   - cd protocol
#   - git checkout jrpc_if
#   - cd ../scripts 

install:
  - pip install coverage
  - pip install coveralls
  - pip install nose
  - cd scripts
  - bash ./setup.sh -travisCI


# install:
  # - bash ./setup.sh -travisCI
  # - cd ../tests
  # - mkdir build && cd build
  # - wget http://sourceforge.net/projects/pyqt/files/sip/sip-4.17/sip-4.17.zip
  # - unzip sip-4.17.zip && cd sip-4.17
  # - python configure.py --incdir="/home/travis/virtualenv/python2.7.9/lib/python2.7"
  # - make
  # - make install
  # - cd ../ && rm -r -f sip-4.17
  # - wget http://downloads.sourceforge.net/project/pyqt/PyQt4/PyQt-4.11.4/PyQt-x11-gpl-4.11.4.tar.gz
  # - tar xvzf PyQt-x11-gpl-4.11.4.tar.gz
  # - cd PyQt-x11-gpl-4.11.4
  # - python ./configure.py --confirm-license --no-designer-plugin -q /usr/bin/qmake-qt4 -e QtGui -e QtCore
  # - make
  # - make install
  # - cd ../ && rm -r -f PyQt-x11-gpl-4.11.4 && cd ../

# script:
#  - python setup.py install
  # - pwd
  # - ls
  # - nosetests --with-coverage --cover-erase --cover-package=ampauth

script:
  - pwd
  - cd ../
  - pwd
  - nosetests --with-coverage --cover-erase
  - cd tests/
  - pwd
  - coverage run test_init.py

after_success:
  - cd ../
  - pwd
  - ls -a
  - coverage combine
  - coverage report --omit '/home/travis/virtualenv/python2.7.9/lib/python2.7/site-packages/*'
  - 'coveralls'
